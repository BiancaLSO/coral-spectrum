<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>All kinds of Dropdowns</title>

        <link rel="stylesheet" href="../../css/cui.css">
        
        <script src="../../js/libs/underscore.js"></script>
        <script src="../../js/libs/handlebars.js"></script>
        <script src="../../js/libs/moment.js"></script>
        <script src="../../js/libs/jquery.js"></script>
        <script src="../../js/libs/jquery-fingerpointer.js"></script>
        <script src="../../js/libs/toe.js"></script>
  
        <script src="../../js/CUI.js"></script>
    </head>
    <body>

        <section>
            <h1>Dropdowns</h1><!-- Standard Single select -->
            
            <h2>Simple single select</h2>
            <div class="dropdown" data-init="dropdown">
                <button>Single Select</button>
                <select name="dropdown">
                    <option>Single One</option>
                    <option selected>Single Two</option>
                    <option>Single Three</option>
                </select>
            </div>
            <br />
            
            <!-- Multi select -->
            <h2>Simple multi select</h2>
            <div class="dropdown" data-init="dropdown">
                <button>Multi Select</button>
                <select name="dropdown2" multiple>
                    <option>Multi One</option>
                    <option selected>Multi Two</option>
                    <option>Multi Three</option>
                </select>
            </div>
            <br />
            
            <!-- Editable -->
            <h2>Editable select with predefined options</h2>
            <div class="dropdown dropdown-editable" data-editable="true" data-init="dropdown">
                <input type="text" placeholder="Editable Select">
                <button>Editable</button>
                <select name="dropdown3">
                    <option>Edit One</option>
                    <option>Edit Two</option>
                    <option>Edit Three</option>
                </select>
            </div>
            <br />
            
            <!-- Editable with own auto-completer -->
            <h2>Editable select with custom autocomplete function</h2>
            <p>Custom autocomplete function with custom renderer</p>
            <div class="dropdown dropdown-editable-autocomplete">
                <input type="text" placeholder="Custom Autocomplete">
                <button>Editable</button>
            </div>
            <br />
            
            <h2>Editable select with custom autocomplete function from markup</h2>
            <p>Custom autocomplete function with custom renderer</p>
            <div data-init="dropdown" data-editable="true"
                 data-autocomplete-callback="function(handler,searchFor,showAll) {autocompleter(handler,searchFor,showAll);}"
                 data-autocomplete-option-renderer="function(index, value) {return optionrenderer(index,value);}"
                 data-autocomplete-delay="1000">
                <input type="text" placeholder="Custom Autocomplete">
                <button>Editable</button>
            </div>
            <br />                        
            <!-- Disabled -->
            <h2>Different states</h2>
            <div class="dropdown" data-init="dropdown" data-disabled="true">
                <button>Disabled</button>
                <select name="dropdown4">
                    <option>One</option>
                    <option>Two</option>
                    <option>Three</option>
                </select>
            </div>
            <br />
            
            <!-- Error -->
            <div class="dropdown error" data-init="dropdown">
                <button>Error</button>
                <select name="dropdown5" >
                    <option>One</option>
                    <option>Two</option>
                    <option>Three</option>
                </select>
            </div>
        </section>
        
        <script type="text/javascript">
            var autocompleter = function(handler, searchFor, showAll) {
                    var items = ["Henry", "Anja", "Wilhelm", "Sandra"];
                    if (showAll) {
                        handler(items, searchFor);
                        return;
                    }
                    
                    var result = [];
                    for(var i = 0; i < items.length; i++) {
                        if (items[i].toLowerCase().indexOf(searchFor.toLowerCase()) >= 0) result.push(items[i]);
                    }
                    handler(result, searchFor);
            };
            var optionrenderer = function(index, value) {
                    var e = $("<span>");
                    e.text(value);
                    e.prepend((index + 1) + ". Meet ");
                    return e;
            };
                
            $(".dropdown-editable-autocomplete").dropdown({
                autocompleteCallback: function(handler, searchFor, showAll) {
                    var items = ["Apple", "Pear", "Banana", "Orange"];
                    if (showAll) {
                        handler(items, searchFor);
                        return;
                    }
                    
                    var result = [];
                    for(var i = 0; i < items.length; i++) {
                        if (items[i].toLowerCase().indexOf(searchFor.toLowerCase()) >= 0) result.push(items[i]);
                    }
                    handler(result, searchFor);
                },
                autocompleteOptionRenderer: function(index, value) {
                    var e = $("<span>");
                    e.text(value);
                    e.prepend((index + 1) + ". add ");
                    e.append("s to my basket");
                    return e;
                },
                autocompleteDelay: 20 // Very fast autocompleter, as we do not work remote
            });
        </script>
       
    </body>
</html>
