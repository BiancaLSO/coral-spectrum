<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  
  <!-- Mocha CSS -->
  <link rel="stylesheet" href="libs/mocha/mocha.css" />
  
  <!-- Test CSS -->
  <link rel="stylesheet" href="styles.css" />
  
  <!-- CoralUI Dependencies -->
  <script src="../js/libs/handlebars.js"></script>
  <script src="../js/libs/jquery.js"></script>
  <script src="../js/libs/toe.js"></script>
  <script src="../js/libs/moment.js"></script>

  <!-- Chai + Sinon -->
  <script src="libs/chai/chai.js"></script>
  <script src="libs/chai-jquery/chai-jquery.js"></script>
  <script src="chai.setup.js"></script>
  <script src="libs/sinon/pkg/sinon.js"></script>
  
  <!-- Mocha -->
  <script src="libs/mocha/mocha.js"></script>
  <script>
    mocha.setup('bdd');
    mocha.setup({globals: ['Typekit','internalWebfont']});
  </script>
  <script>
    // configuration for phantomJS
    if (window.PHANTOMJS) {
      $.fn.finger = function () {
        return this; 
      };

      $.fn.pointer = function () {
        this.on.apply(this, arguments);

        return this;
      };
    }
  </script>
  
  <!-- CoralUI files -->
  <script>
    // Force polyfills to be used
    Function.bind = undefined;
    Object.create = undefined;
  </script>
  <script src="../js/CUI.js"></script>
  <script src="../js/CUI.Templates.min.js"></script>
</head>
<body>
  <div id="mocha"></div>
  
  <!-- Tests: legacy -->
  <!-- NOTE: until our testing setup is refactored out of legacy -->
  <!-- this file will clobber core/tests/index when running from top -->
  <!-- level grunt ... for now all tests are run from this file -->
  <script src="test.Class.js"></script>
  <script src="test.CUI.Util.js"></script>
  <script src="test.CUI.Widget.js"></script>
  <script src="test.CUI.Accordion.js"></script>
  <script src="test.CUI.Alert.js"></script>
  <script src="test.CUI.Datepicker.js"></script>
  <script src="test.CUI.Dropdown.js"></script>
  <script src="test.CUI.Filters.js"></script>
  <script src="test.CUI.Slider.js"></script>
  <script src="test.CUI.Tooltip.js"></script>
  <script src="test.CUI.Tour.js"></script>
  <!-- modular components -->
  <script src="test.CUI.NumberInput.js"></script>
  <script src="test.CUI.Rail.js"></script>
  <script src="test.CUI.Tabs.js"></script>
  <script src="test.CUI.Modal.js"></script>
  <script src="test.CUI.Popover.js"></script>
  <script src="test.CUI.SelectList.js"></script>
  <script src="test.CUI.Autocomplete.js"></script>

  <!-- Do test run -->
  <script>
      // Prevent tests from running twice when running through grunt.
      // https://github.com/yeoman/generator-webapp/issues/65
      // Can alternatively do a check on window.PHANTOMJS
      if (navigator.userAgent.indexOf('PhantomJS') < 0) {
          mocha.run();
      }
  </script>
</body>
</html>
